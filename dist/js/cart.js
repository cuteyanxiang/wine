"use strict";function Cart(){getCookie("cart")?this.cartData=JSON.parse(getCookie("cart")):this.cartData={}}Cart.prototype.addData=function(t,a,e){!this.cartData[t]||e?this.cartData[t]=a:this.cartData[t]=Number(this.cartData[t])+a,setCookie("cart",JSON.stringify(this.cartData),7)},Cart.prototype.showData=function(t){var e=this,a="";for(var n in this.cartData)data.forEach(function(t){t.id==n&&(a+='<li data-id = "'+n+'">\n\t\t\t\t<input type="checkbox" class="ch">\n\t\t\t\t<img src="'+t.imgSrc+'">\n\t\t\t\t<span>'+t.title+'</span>\n\t\t\t\t<span class="minus">-</span>\n\t\t\t\t<input type="text" class="num" value="'+e.cartData[n]+'">\n\t\t\t\t<span class="plus">+</span>\n\t\t\t\t<span class="perPrice">'+t.price+'</span>\n\t\t\t\t<span class="totalPrice">'+e.cartData[n]*t.price+'</span>\n\t\t\t\t<span class="delBtn">删除</span>\n\t\t\t\t</li>')});this.oCartList=document.getElementById(t),this.oCartList.innerHTML=a;var i=document.getElementsByClassName("minus"),r=document.getElementsByClassName("plus"),c=document.getElementsByClassName("num"),s=document.getElementsByClassName("delBtn");this.aTotalPrice=document.getElementsByClassName("totalPrice"),this.aCheckBox=document.getElementsByClassName("ch");for(var o=document.getElementsByClassName("perPrice"),l=function(a){i[a].onclick=function(){var t=i[a].parentNode.getAttribute("data-id");c[a].value<=1?alert("最少购买一件商品"):(c[a].value--,e.aTotalPrice[a].innerHTML=c[a].value*o[a].innerHTML,e.addData(t,-1,!1),e.getTotalPrice())},r[a].onclick=function(){var t=i[a].parentNode.getAttribute("data-id");c[a].value++,e.aTotalPrice[a].innerHTML=c[a].value*o[a].innerHTML,e.addData(t,1,!1)},c[a].onchange=function(){var t=i[a].parentNode.getAttribute("data-id");e.aTotalPrice[a].innerHTML=c[a].value*o[a].innerHTML,e.addData(t,c[a].value,!0)},s[a].onclick=function(){var t=i[a].parentNode.getAttribute("data-id");e.removeData(t,s[a].parentNode)},e.aCheckBox[a].onclick=function(){e.getTotalPrice()}},u=0;u<i.length;u++)l(u)},Cart.prototype.removeData=function(t,a){delete this.cartData[t],setCookie("cart",JSON.stringify(this.cartData),7),this.oCartList.removeChild(a)},Cart.prototype.getTotalPrice=function(){for(var t=0,a=0;a<this.aCheckBox.length;a++)1==this.aCheckBox[a].checked&&(t+=Number(this.aTotalPrice[a].innerHTML));this.totalPrice=document.getElementById("totalPrice"),this.totalPrice.innerHTML=t};